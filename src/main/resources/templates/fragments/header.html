<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<!--headerFragment 선언-->
<div th:fragment="headerFragment">
    <header class="py-3 border-bottom fixed-header" style="background-color: white; position:fixed">
        <!--        <div class="container-fluid d-flex align-items-center" style="gap: 20px;">-->
        <!--            <div class="container-fluid d-flex align-items-center" style="gap: 20px; padding-top: 10px; padding-bottom: 10px;">-->
        <div class="container-fluid d-flex align-items-center "
             style="gap: 10px; padding: 0; justify-content: flex-start">


            <!-- 로고 area-->
            <div class="logo container d-flex justify-content-start"
                 style="flex-grow: 1; gap: 20px; margin-right: auto;">
                <a th:href="@{/}"
                   class="d-flex align-items-center col-lg-4 mb-2 mb-lg-0 link-body-emphasis text-decoration-none"
                   aria-expanded="false" style="width: 150px; height: 40px">
                    <img src="/images/Logo.png" alt="Logo" class="bi me-2 img-fluid" style="width: 140px; height: 39px">

                </a>
            </div>

            <!-- 검색 area-->
<!--            <div class="search-container"-->
<!--                 style="width: 40% ; position: fixed; top: auto; left: 50%; transform: translateX(-50%); z-index: 1000;">-->
<!--                <form class="w-100 me-3" role="search">-->
<!--                    <input type="search" class="form-control" placeholder="Search..." aria-label="Search">-->
<!--                </form>-->
<!--            </div>-->

            <!-- 프로필 area -->

            <!--로그인 하지 않았을 때-->
            <div class="profile d-flex align-items-center justify-content-end"
                 style="flex-grow: 2; gap: 20px; margin-left: auto; min-width: 400px; max-height: 40px ">

                <div class="logout-status" th:if="${session.user==null}"
                     style="display: flex;  justify-content: flex-end; gap: 20px; margin-right: 30px">
                    <div class="buttons" style="margin-right:20px">
                        <a href="/user/login/first">
                            <button class="login-btn">로그인</button>
                        </a>
                        <a href="/user/signup/first">
                            <button class="signup-btn">회원가입</button>
                        </a>
                    </div>
                </div>

                <!-- 로그인 상태-->
                <div class="login-status" th:unless="${session.user==null}"
                     style="display: flex;  justify-content: flex-end; gap: 20px; margin-right: 30px">

                    <!-- 버튼 -->
                    <div class="buttons">
                        <a href="/feed/upload">
                            <button class="post-btn">피드글 게시</button>
                        </a>
                    </div>

                    <!-- 프로필 이미지 및 드롭다운 -->
                    <div style="display: flex;  justify-content: flex-end; gap: 10px;">
                        <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle"
                           data-bs-toggle="dropdown" aria-expanded="false" style="position: relative;">
                            <img th:src="@{${session.user.userProfilePictureGenerated != null ? '/upload/user/' + session.user.userProfilePictureGenerated : '/images/user/default_user.png'}}"
                                 alt="프로필 사진" width="47" height="47" class="rounded-circle">
                        </a>


                        <ul class="dropdown-menu text-small shadow" style="top: 50px;"> <!-- 아래로 이동 -->
                            <li><a class="dropdown-item" href="/user/account">프로필 수정</a></li>
                            <li><a class="dropdown-item" href="/user/mypage">마이페이지</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="/user/logout/verify">로그아웃</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div> <!--end container-->
    </header> <!--end header-->
</div> <!--end fragment-->
</html>
